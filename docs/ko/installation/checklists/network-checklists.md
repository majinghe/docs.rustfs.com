---
title: "네트워크 검사 체크리스트"
description: "RustFS 엔터프라이즈급 배포 네트워크 검사 체크리스트"
---

# 네트워크 검사 체크리스트

## 1. 네트워크 아키텍처 설계

### 기본 네트워크 계획
- **토폴로지 구조 검증**
 배포 아키텍처(스타형/링형/메시형)가 분산 스토리지의 고가용성 요구사항을 충족하는지 확인
- **중복 경로 검사**
 노드 간에 최소 2개의 독립적인 물리 링크가 존재하도록 보장
- **대역폭 계획**
 예상 트래픽 계산: 객체 스토리지 읽기/쓰기 대역폭 × 노드 수 × 복제본 수 + 20% 여유

### IP 계획
- [ ] 관리 네트워크와 데이터 네트워크 분리
- [ ] 스토리지 노드에 연속된 IP 대역 할당(/24 서브넷 권장)
- [ ] 확장을 위해 최소 15%의 IP 주소 예약

---

## 2. 하드웨어 장비 요구사항
### 스위치 구성
| 검사 항목 | 표준 요구사항 |
|--------|----------|
| 백플레인 대역폭 | ≥ 전체 포트 라인 속도 전달 능력 × 1.2 |
| 포트 유형 | 10G/25G/100G SFP+/QSFP+ 광섬유 포트 |
| 플로우 테이블 용량 | ≥ 노드 수 × 5 |
| 스패닝 트리 프로토콜 | RSTP/MSTP 빠른 수렴 활성화 |

### 물리 연결
- [ ] 광섬유 감쇠 테스트(단일모드 ≤0.35dB/km)
- [ ] 포트 엇갈린 연결 검사(A 노드 eth0 ↔ B 노드 eth0)
- [ ] 케이블 레이블 시스템(소스/목적지 IP+포트 번호 포함)

---

## 3. 운영체제 네트워크 구성
### 커널 매개변수 튜닝
```bash
# 다음 매개변수 설정 검사
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_slow_start_after_idle = 0
```

### 네트워크 카드 구성
- [ ] 점보 프레임 활성화(MTU=9000, 전체 라인 경로 지원 필요)
- [ ] 네트워크 카드 본딩 모드 검증(LACP mode4 권장)
- [ ] IPv6 비활성화(사용하지 않는 경우)

---

## 4. 보안 정책
### 방화벽 규칙
```bash
# 필수 개방 포트
- TCP 443(HTTPS API)
- TCP 9000(S3 호환 인터페이스)
- TCP 7946(Serf 노드 통신)
- UDP 4789(VxLAN 터널)
```

### 액세스 제어
- 스위치 포트 보안 MAC 제한
- 스토리지 노드 간 IPSec 터널 암호화
- 관리 인터페이스에 TLS 1.3 활성화

---

## 5. 성능 검증 테스트
### 기준 테스트 항목
1. 노드 간 지연 테스트: `iperf3 -s 8972 <목표 IP>`
2. 크로스 랙 대역폭 테스트: `iperf3 -c <목표 IP> -P 8 -t 30`
3. 장애 전환 테스트: 코어 링크를 무작위로 끊어 복구 시간 관찰

### 허용 기준
| 지표 | 요구사항 |
|------|--------|
| 노드 지연 | ≤1ms(동일 데이터센터)/≤5ms(크로스 AZ) |
| 대역폭 사용률 | 픽크시 ≤70% 설계 용량 |
| 장애 전환 | 500ms 미만 BPDU 수렴 |

---

## 6. 문서 기록 요구사항
1. 네트워크 토폴로지 다이어그램(물리 연결 및 논리 IP 포함)
2. 스위치 구성 백업 파일(타임스탬프 포함)
3. 기준선 테스트 보고서(원시 데이터 포함)
4. 변경 기록표(유지보수 창 정보 포함)

> **팁**: 정식 배포 전 72시간 압력 테스트를 수행하여 픽크 트래픽의 110%에 해당하는 부하 시나리오를 시뮬레이션할 것을 권장합니다

이 체크리스트는 엔터프라이즈급 스토리지 시스템 네트워크 배포의 핵심 검사 지점을 다루며, 분산 객체 스토리지의 특성에 맞게 매개변수 요구사항을 최적화했습니다. RustFS 공식 기술 지원을 받으실 수 있습니다.
