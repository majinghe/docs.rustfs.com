# Commvault 통합

RustFS는 Commvault Complete Data Protection과 원활한 통합을 제공하여 뛰어난 성능과 안정성을 갖춘 엔터프라이즈 규모의 백업, 복구 및 데이터 관리 솔루션을 제공합니다.

## 개요

![Commvault 로고](./images/commvault-logo.png)

Commvault와 함께하는 RustFS는 다음을 제공합니다:

- **엔터프라이즈 데이터 보호**: 모든 워크로드에 대한 포괄적인 백업 및 복구
- **클라우드 규모 스토리지**: 대규모로 확장 가능한 객체 스토리지 백엔드
- **고급 데이터 관리**: 지능형 데이터 라이프사이클 관리
- **통합 플랫폼**: 백업, 아카이브 및 분석을 위한 단일 플랫폼

## 핵심 이점

### 원자적 메타데이터 연산

![원자적 메타데이터](./images/atomic-metadata.png)

#### 일관성 있는 메타데이터

- **ACID 트랜잭션**: 원자적, 일관성, 격리성, 지속성 연산
- **메타데이터 무결성**: 보장된 메타데이터 일관성
- **빠른 복구**: 일관성 있는 메타데이터로 신속한 복구
- **동시 연산**: 충돌 없는 높은 동시성

### 대규모 빠른 성능

![빠른 성능](./images/fast-performance.png)

#### 높은 처리량 연산

- **병렬 처리**: 대규모 병렬 백업 및 복원
- **최적화된 I/O**: 데이터 보호 워크로드에 최적화
- **지능형 캐싱**: 자주 액세스하는 데이터의 스마트 캐싱
- **선형 확장**: 클러스터 증가와 함께 성능 확장

### 뛰어난 확장성

![확장성](./images/scalability.png)

#### 탄력적 확장

- **페타바이트 규모**: 페타바이트 규모의 백업 데이터로 확장
- **수평 확장**: 용량과 성능을 위한 노드 추가
- **자동 확장**: 수요에 따른 자동 확장
- **글로벌 네임스페이스**: 모든 노드에 걸친 통합 네임스페이스

### 간단하고 안전한 아키텍처

![간단 안전](./images/simple-secure.png)

#### 엔터프라이즈 보안

- **종단 간 암호화**: 저장 및 전송 중 암호화
- **액세스 제어**: 세밀한 액세스 제어 정책
- **감사 로깅**: 포괄적인 감사 추적
- **규정 준수**: 규제 준수 요구사항 충족

## Commvault 통합 기능

### 스토리지 통합

#### 디스크 라이브러리 구성

- **디스크 라이브러리**: RustFS를 Commvault 디스크 라이브러리로 구성
- **중복 제거**: 모든 데이터에 걸친 글로벌 중복 제거
- **압축**: 고급 압축 알고리즘
- **암호화**: 하드웨어 가속 암호화

#### 클라우드 스토리지 통합

- **클라우드 라이브러리**: RustFS를 클라우드 스토리지 라이브러리로 사용
- **S3 호환성**: 완전한 Amazon S3 API 호환성
- **하이브리드 배포**: 원활한 하이브리드 클라우드 배포
- **비용 최적화**: 지능형 스토리지 계층화

### 데이터 보호 기능

#### 백업 및 복구

- **애플리케이션 인식**: 애플리케이션 일관성 백업
- **세분화된 복구**: 파일, 폴더 및 애플리케이션 수준 복구
- **인스턴트 복구**: 최소 RTO로 빠른 복구
- **크로스 플랫폼**: 모든 주요 플랫폼 지원

#### 아카이브 및 규정 준수

- **지능형 아카이브**: 정책 기반 데이터 아카이브
- **법적 보류**: 법적 보류 및 소송 지원
- **보존 관리**: 유연한 보존 정책
- **규정 준수 보고**: 자동화된 규정 준수 보고

## 배포 아키텍처

### 온프레미스 데이터 보호

```
┌─────────────────┐    ┌─────────────────┐
│   Production    │    │   CommServe     │
│   Environment   │───►│   + MediaAgent  │
│                 │    │                 │
│ • Servers       │    │ ┌─────────────┐ │
│ • Databases     │    │ │   RustFS    │ │
│ • Applications  │    │ │   Storage   │ │
│ • VMs           │    │ │   Library   │ │
└─────────────────┘    │ └─────────────┘ │
                       └─────────────────┘
```

### 하이브리드 클라우드 아키텍처

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   On-Premises   │    │   Primary       │    │   Cloud         │
│   Production    │───►│   Backup        │───►│   Archive       │
│                 │    │   (RustFS)      │    │   (RustFS)      │
│ • Primary Data  │    │                 │    │                 │
│ • Applications  │    │ • Fast Recovery │    │ • Long-term     │
│ • Databases     │    │ • Deduplication │    │ • Compliance    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 멀티 사이트 데이터 보호

```
┌─────────────────┐    ┌─────────────────┐
│   Primary DC    │    │   DR Site       │
│                 │◄──►│                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │ Production  │ │    │ │ DR Systems  │ │
│ └─────────────┘ │    │ └─────────────┘ │
│                 │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │   RustFS    │ │    │ │   RustFS    │ │
│ │   Primary   │ │    │ │   Replica   │ │
│ └─────────────┘ │    │ └─────────────┘ │
└─────────────────┘    └─────────────────┘
```

## 구성 및 설정

### Commvault 구성

#### 디스크 라이브러리 설정

```bash
# RustFS를 디스크 라이브러리로 구성
# Commvault Command Center를 통해
1. Storage → Disk → Create Disk Library
2. Library Name: RustFS-Library
3. MediaAgent: 적절한 MediaAgent 선택
4. Mount Path: /mnt/rustfs
5. Enable Deduplication: Yes
6. Encryption: Enable
```

#### 클라우드 라이브러리 구성

```bash
# RustFS를 클라우드 라이브러리로 구성
1. Storage → Cloud → Create Cloud Library
2. Cloud Storage: Generic S3
3. Service Host: rustfs.example.com
4. Access Key: your-access-key
5. Secret Key: your-secret-key
6. Container: commvault-backups
```

### 스토리지 정책 구성

#### 백업 스토리지 정책

- **기본 복사본**: 최근 백업을 위한 고성능 스토리지
- **보조 복사본**: 오래된 백업을 위한 비용 최적화 스토리지
- **아카이브 복사본**: 장기 보존 및 규정 준수
- **보조 복사본**: 재해 복구 및 복제

#### 데이터 에이징 정책

- **보존 규칙**: 다양한 데이터 유형에 대한 보존 기간 정의
- **에이징 정책**: 스토리지 계층 간 자동 이동
- **정리**: 만료된 데이터의 자동 삭제
- **규정 준수**: 규제 보존 요구사항 충족

## 워크로드 보호

### 가상 머신 보호

#### VMware vSphere

- **vCenter 통합**: 네이티브 vCenter 통합
- **변경된 블록 추적**: 증분 백업 최적화
- **애플리케이션 일관성**: VSS 인식 백업
- **인스턴트 복구**: 빠른 VM 복구 및 페일오버

#### Microsoft Hyper-V

- **SCVMM 통합**: System Center 통합
- **Hyper-V VSS**: 볼륨 섀도 복사본 서비스
- **라이브 마이그레이션**: 라이브 마이그레이션 중 백업
- **클러스터 지원**: 페일오버 클러스터 지원

### 데이터베이스 보호

#### Microsoft SQL Server

- **SQL VSS Writer**: 애플리케이션 일관성 백업
- **로그 전달**: 트랜잭션 로그 백업 및 전달
- **Always On**: Always On 가용성 그룹 지원
- **세분화된 복구**: 데이터베이스, 테이블 및 행 수준 복구

#### Oracle Database

- **RMAN 통합**: Oracle Recovery Manager 통합
- **Data Guard**: Oracle Data Guard 지원
- **RAC 지원**: Real Application Clusters 지원
- **시점 복구**: 세분화된 시점 복구

#### 기타 데이터베이스

- **MySQL**: MySQL 데이터베이스 보호
- **PostgreSQL**: PostgreSQL 백업 및 복구
- **MongoDB**: NoSQL 데이터베이스 보호
- **SAP HANA**: SAP HANA 데이터베이스 백업

### 파일 시스템 보호

#### Windows 파일 시스템

- **NTFS**: Windows NTFS 파일 시스템
- **공유 보호**: 네트워크 공유 백업
- **VSS 통합**: 볼륨 섀도 복사본 서비스
- **열린 파일 백업**: 열린 파일 및 잠긴 파일의 백업

#### Unix/Linux 파일 시스템

- **ext4/XFS**: Linux 파일 시스템 지원
- **NFS**: 네트워크 파일 시스템 백업
- **스냅샷 통합**: LVM 및 파일시스템 스냅샷
- **심볼릭 링크**: 심볼릭 링크 및 권한 보존

### 애플리케이션 보호

#### Microsoft Exchange

- **Exchange VSS**: Exchange 인식 백업
- **사서함 복구**: 개별 사서함 복구
- **데이터베이스 복구**: Exchange 데이터베이스 복구
- **공용 폴더**: 공용 폴더 백업 및 복구

#### Microsoft SharePoint

- **SharePoint VSS**: SharePoint 인식 백업
- **사이트 컬렉션**: 사이트 컬렉션 백업 및 복구
- **콘텐츠 데이터베이스**: 콘텐츠 데이터베이스 보호
- **검색 인덱스**: 검색 인덱스 백업 및 복구

#### 엔터프라이즈 애플리케이션

- **SAP**: SAP 애플리케이션 백업
- **Lotus Notes**: IBM Lotus Notes/Domino
- **Active Directory**: Active Directory 백업
- **파일 공유**: 네트워크 파일 공유 보호

## 데이터 관리 및 분석

### 콘텐츠 인덱싱

#### 검색 및 검색

- **전체 텍스트 검색**: 모든 백업 데이터에 걸친 검색
- **메타데이터 인덱싱**: 파일 및 애플리케이션 메타데이터 인덱스
- **콘텐츠 분석**: 데이터 패턴 및 트렌드 분석
- **eDiscovery**: 법적 검색 및 규정 준수

#### 데이터 분류

- **자동 분류**: AI 기반 데이터 분류
- **정책 기반**: 규칙 기반 분류 정책
- **민감한 데이터**: 민감한 데이터 식별 및 보호
- **규정 준수**: 데이터 거버넌스 요구사항 충족

### 데이터 라이프사이클 관리

#### 지능형 데이터 이동

- **정책 기반 계층화**: 계층 간 자동 데이터 이동
- **비용 최적화**: 스토리지 비용 최적화
- **성능 최적화**: 성능과 비용의 균형
- **규정 준수**: 보존 및 규정 준수 요구사항 충족

#### 아카이브 및 보존

- **자동화된 아카이브**: 정책 기반 데이터 아카이브
- **법적 보류**: 법적 보류 및 소송 지원
- **보존 정책**: 유연한 보존 관리
- **폐기**: 안전한 데이터 폐기

## 보안 및 규정 준수

### 데이터 보안

#### 암호화

- **AES-256 암호화**: 저장된 데이터에 대한 강력한 암호화
- **전송 중 암호화**: 데이터 전송을 위한 TLS 암호화
- **키 관리**: 중앙 집중식 암호화 키 관리
- **하드웨어 보안**: 하드웨어 보안 모듈 지원

#### 액세스 제어

- **역할 기반 액세스**: 역할 기반 액세스 제어 (RBAC)
- **다단계 인증**: 향상된 인증
- **LDAP/AD 통합**: 엔터프라이즈 디렉터리 통합
- **감사 로깅**: 포괄적인 액세스 로깅

### 규정 준수 기능

#### 규제 준수

- **GDPR**: 일반 데이터 보호 규정
- **HIPAA**: 의료보험 이동성 및 책임에 관한 법률
- **SOX**: 사베인스-옥슬리 법
- **SEC**: 증권거래위원회 규칙

#### 데이터 거버넌스

- **데이터 보존**: 자동화된 보존 정책
- **법적 보류**: 법적 보류 및 보존
- **감사 보고서**: 자동화된 감사 보고
- **보관 연속성**: 데이터 보관 연속성 유지

## 모니터링 및 관리

### Commvault Command Center

#### 중앙 집중식 관리

- **단일 콘솔**: 통합 관리 인터페이스
- **멀티 테넌트**: 여러 조직 지원
- **대시보드**: 실시간 상태 및 분석
- **보고**: 포괄적인 보고 및 분석

#### 작업 모니터링

- **실시간 상태**: 실시간 작업 상태 모니터링
- **성능 메트릭**: 백업 및 복원 성능
- **용량 계획**: 스토리지 용량 계획
- **알림**: 사전 예방적 알림 및 알림

### 통합 및 자동화

#### REST API

- **프로그래밍 방식 액세스**: 자동화를 위한 RESTful API
- **타사 통합**: 외부 시스템과의 통합
- **사용자 정의 애플리케이션**: 사용자 정의 애플리케이션 구축
- **워크플로 자동화**: 운영 워크플로 자동화

#### PowerShell 통합

- **PowerShell Cmdlet**: 네이티브 PowerShell 지원
- **스크립팅**: 일상 작업 자동화
- **대량 작업**: 대량 작업 수행
- **사용자 정의 스크립트**: 사용자 정의 자동화 스크립트 생성

## 모범 사례

### 배포 모범 사례

1. **크기 조정**: 백업 워크로드에 적합한 크기 조정
2. **네트워크**: 네트워크 구성 최적화
3. **스토리지**: 적절한 스토리지 정책 구성
4. **보안**: 보안 모범 사례 구현

### 성능 최적화

1. **동시 작업**: 동시 작업 설정 최적화
2. **중복 제거**: 글로벌 중복 제거 구성
3. **압축**: 압축과 성능의 균형
4. **네트워크**: 네트워크 대역폭 사용량 최적화

### 데이터 관리

1. **스토리지 정책**: 효과적인 스토리지 정책 설계
2. **보존**: 적절한 보존 정책 구현
3. **아카이브**: 지능형 아카이브 정책 사용
4. **모니터링**: 지속적인 모니터링 및 최적화

## 문제 해결

### 일반적인 문제

#### 성능 문제

- **느린 백업**: 네트워크 및 스토리지 성능 확인
- **높은 CPU 사용량**: MediaAgent 리소스 사용량 모니터링
- **메모리 문제**: 메모리 할당 최적화
- **디스크 공간**: 사용 가능한 디스크 공간 모니터링

#### 연결 문제

- **네트워크 연결**: 네트워크 연결 확인
- **방화벽 규칙**: 방화벽 구성 확인
- **DNS 해결**: DNS 해결 확인
- **서비스 상태**: Commvault 서비스 상태 확인

#### 구성 문제

- **라이브러리 구성**: 라이브러리 설정 확인
- **스토리지 정책**: 스토리지 정책 구성 확인
- **자격 증명**: 액세스 자격 증명 확인
- **권한**: 파일 시스템 권한 확인

## 시작하기

### 전제 조건

1. **Commvault 환경**: Commvault Complete Data Protection v11.20+
2. **RustFS 클러스터**: 올바르게 구성된 RustFS 클러스터
3. **네트워크 연결**: Commvault와 RustFS 간 네트워크 연결
4. **MediaAgent**: 충분한 리소스를 가진 Commvault MediaAgent

### 빠른 시작 가이드

1. **MediaAgent 설치**: Commvault MediaAgent 설치 및 구성
2. **라이브러리 구성**: RustFS를 디스크 또는 클라우드 라이브러리로 추가
3. **스토리지 정책 생성**: RustFS 라이브러리를 사용하는 스토리지 정책 생성
4. **Subclient 구성**: 데이터 보호를 위한 subclient 생성
5. **백업 실행**: 초기 백업 작업 실행
6. **복구 테스트**: 백업 복구 절차 테스트

### 다음 단계

- **성능 최적화**: 최적 성능을 위한 백업 설정 조정
- **보안 구현**: 암호화 및 액세스 제어 구성
- **모니터링 설정**: 포괄적인 모니터링 구현
- **재해 복구 계획**: 재해 복구 절차 개발
- **직원 교육**: 백업 및 복구 절차에 대한 직원 교육