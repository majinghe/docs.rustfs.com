---
title: "小ファイル最適化"
description: "サーバーのDRAMを利用した超高性能ワークロード向けインメモリオブジェクトストレージを作成"
---

# 小ファイル最適化

> 超高性能ワークロード向けインメモリオブジェクトストレージを作成

大量のIOPSとスループット性能を要求するワークロードのために、サーバーのDRAMを利用して分散共有メモリプールを作成します。

## 背景

RustFSの小ファイル最適化は、IOPSとスループット性能を必要とするワークロードに非常に適しています。現代のアーキテクチャでは、これはますますAI/MLワークロードを意味します。キャッシュがない場合、I/O操作がGPUのボトルネックになる可能性があります。

エンタープライズキャッシュを使用すると、トレーニング、検証、テストデータセットを含むバケットをメモリに保持して、メモリベースのアクセスを提供できます。

## 特徴

### 🗃️ 専用オブジェクトキャッシュ

RustFSの小ファイル最適化は、ファイルオブジェクトのキャッシングに特化しています。
既存のオブジェクトキャッシュでオブジェクトが見つからない場合、そのオブジェクトを自動的に取得し、将来のリクエストのためにキャッシュし、呼び出し元にオブジェクトを返します。

### 💾 一貫性ハッシュアルゴリズム

RustFSの小ファイル最適化は、コンテンツを優先します。
一貫性ハッシュアルゴリズムを使用して、キャッシュされたオブジェクトデータをキャッシュノードクラスター（ピアと呼ばれる）全体に分散させます。一貫性ハッシュにより、オブジェクトキーに基づいてオブジェクトを簡単に見つけることができます。これにより、オブジェクトキーとキャッシュされたオブジェクトを保持するノードとの間に1対1の関係が生成されます。また、ノードが同じ量のデータを含むことを保証し、1つのノードが過負荷になりながら他のノードがアイドル状態になるような状況を回避します。しかし、最も重要なことは、ノードが追加または削除された場合に、システムを整列させるために必要な再編成が最小限に抑えられるような方法でオブジェクトを分散させることです。

### 🧹 ローリングキャッシュメモリ管理

RustFSは、メモリ管理にローリングキャッシュを使用します。RustFSはローリングキャッシュを使用して、小ファイル最適化設定で指定された制限内でキャッシュの総サイズを維持します。新しいオブジェクトを追加することで、キャッシュサイズが指定された制限を超える場合、オブジェクトが最後にリクエストされた時刻を示すタイムスタンプに基づいて1つ以上のオブジェクトが削除されます。

### 🔄 自動バージョン更新

新しいオブジェクトバージョンの自動更新。キャッシュされたオブジェクトが更新された場合、RustFSオブジェクトストレージは自動的にオブジェクトの新しいバージョンでキャッシュを更新します。

### 🧩 シームレスAPI統合

RustFSの小ファイル最適化は、RustFSの舞台裏拡張機能です。小ファイル最適化がRustFSの拡張機能であるため、開発者は新しいAPIを学ぶ必要がありません。開発者は以前と同じAPIを使用します。リクエストされたオブジェクトがキャッシュにある場合、RustFSはキャッシュから自動的に取得します。オブジェクトがキャッシュされるべきで、初回リクエストの場合、RustFSはオブジェクトストレージから取得し、呼び出し元に返し、後続のリクエストのためにキャッシュに配置します。

